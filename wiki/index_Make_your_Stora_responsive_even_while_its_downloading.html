<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>Make your Stora responsive even while its downloading - OpenStora</title>
<meta name="generator" content="MediaWiki 1.22.6" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://sigri44.github.io/OpenStora/wiki/opensearch_desc.php" title="OpenStora (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://sigri44.github.io/OpenStora/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="OpenStora Atom feed" href="https://sigri44.github.io/OpenStora/wiki/index_Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="style.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: hardwar6_wiki:resourceloader:filter:minify-css:7:a5305c32ce5719fffdb0ebb117d3d93a */</style>

<script src="https://sigri44.github.io/OpenStora/wiki/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Make_your_Stora_responsive_even_while_its_downloading","wgTitle":"Make your Stora responsive even while its downloading","wgCurRevisionId":1124,"wgRevisionId":1124,"wgArticleId":100,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Make_your_Stora_responsive_even_while_its_downloading","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: hardwar6_wiki:resourceloader:filter:minify-js:7:5a69c7e0fa6557851b6dea8a62efaffb */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("https://sigri44.github.io/OpenStora/wiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Make_your_Stora_responsive_even_while_its_downloading skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Make your Stora responsive even while its downloading</span></h1>
			<div id="bodyContent">
								<div id="siteSub">From OpenStora</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Having your Stora download media is great. However having this downloading, parring and unrarring affect your Stora's responsiveness is a bummer. Luckily there is a solution: if you give your download processes a lower priority(to both the CPU and hard drive) they will no longer drag your Stora down. This can be achieved by using nice and ionice.
</p><p>All examples are assuming you're running as root. If not, prefix all the commands with "sudo ".
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Give_processes_a_CPU_priority_using_nice"><span class="tocnumber">1</span> <span class="toctext">Give processes a CPU priority using <i>nice</i></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Give_processes_a_IO_priority_using_ionice"><span class="tocnumber">2</span> <span class="toctext">Give processes a IO priority using <i>ionice</i></span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Enabling_CFQ_scheduling_on_the_Stora_.28enabling_ionice.29"><span class="tocnumber">3</span> <span class="toctext">Enabling CFQ scheduling on the Stora (enabling ionice)</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Adjusting_your_daemons_so_they_run_at_a_lower_priority"><span class="tocnumber">4</span> <span class="toctext">Adjusting your daemons so they run at a lower priority</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Give_processes_a_CPU_priority_using_nice">Give processes a CPU priority using <i>nice</i></span></h2>
<p>In Linux process CPU priorities are called nice-levels. A process with a high nice level is very nice - meaning it happily yields its right to CPU cycles in the favor of other processes. A high nice level represents a low priority. The range of nice levels goes from -20 (highest priority) to 19 (lowest).
</p><p>To apply a nice level when you start a process, of for example 19,  use this command:
</p>
<pre>nice -n 19 /path/to/executable
</pre>
<h2><span class="mw-headline" id="Give_processes_a_IO_priority_using_ionice">Give processes a IO priority using <i>ionice</i></span></h2>
<p>While downloading, most activities are more IO(hard drive) intensive than CPU intensive. So in order to make sure the Stora remains responsive its very important to give you download applications a low IO priority. Luckily, this is possible using ionice.
</p><p>Unfortunately by default the Stora does not support ionice. Ionice requires you to have CFQ scheduling enabled. CFQ scheduling is one of the ways Linux can assign hard drive access to the processes. In the case of CFQ it is possible to give different processes different priorities. For more information refer to <a rel="nofollow" class="external free" href="http://en.wikipedia.org/wiki/I/O_scheduling">http://en.wikipedia.org/wiki/I/O_scheduling</a> or <a rel="nofollow" class="external free" href="http://en.wikipedia.org/wiki/CFQ">http://en.wikipedia.org/wiki/CFQ</a> .
</p><p>Ionice works with three classes. 1 for real time, 2 for best-effort, 3 for idle. Class 2, best-effort, is divided into 8 levels(0-7 with 0 being the highest priority).
</p><p>To apply a ionice level when launching a process u use these command
</p>
<pre>ionice -c3 /path/to/executable # Gives the process the lowest IO priority possible: Idle
ionice -c1 /path/to/executable # Gives the process the highest IO priority possible: real time. Carefull! This could block your system
ionice -c2 -n2 /path/to/executable # Gives the process a medium priority-class(best-effort) with a level of 2. This process has a somewhat higher priority than default.
</pre>
<h2><span class="mw-headline" id="Enabling_CFQ_scheduling_on_the_Stora_.28enabling_ionice.29">Enabling CFQ scheduling on the Stora (enabling ionice)</span></h2>
<p>Thanks to pippone we have the compiled kernel modules to allow CFQ scheduling!
</p>
<ul>
<li> Download them from: <a rel="nofollow" class="external free" href="https://sigri44.github.io/OpenStora/forum/viewtopic.php?p=5007&amp;sid=3f202a89cc9cb27b57a705f6e0e22bff#p5007">http://www.openstora.com/forum/viewtopic.php?p=5007&amp;sid=3f202a89cc9cb27b57a705f6e0e22bff#p5007</a>
</li>
<li> Unpack schedulers.tar.gz into /lib/modules/2.6.22.18-Netgear/kernel/block (block folder needs to be created)
</li>
<li> Execute(This lets the kernel scan the module folders to find the new module we added):
</li>
</ul>
<pre>depmod -a
</pre>
<p>To load the module execute:
</p>
<pre>modprobe cfq-iosched
</pre>
<p>Now you need to configure your drives so they will use CFQ scheduling instead of the default scheduling.
</p>
<pre>echo cfq &gt; /sys/block/sda/queue/scheduler
echo cfq &gt; /sys/block/sdb/queue/scheduler # only required if you have 2 hard drives installed
</pre>
<p>In order to have the above done automatically every boot, create this init script and save it as /etc/init.d/setupioschedule
</p>
<pre>#!/bin/bash
#chkconfig: 235 02 02
#description: Loads the CFQ IO schedule module en sets drive scheduling to CFQ
#
echo "Setting up CFQ as IO scheduler"
/sbin/modprobe cfq-iosched
echo cfq &gt; /sys/block/sda/queue/scheduler 2&gt; /dev/null # Sets up drive 1 (if available)
echo cfq &gt; /sys/block/sdb/queue/scheduler 2&gt; /dev/null # Sets up drive 2 (if available)
</pre>
<p>Then make it executeable and have it autorun:
</p>
<pre>chmod +x /etc/init.d/setupioschedule
chkconfig --add setupioschedule
</pre>
<p>(If your worried about the startup script firing at every runlevel change - don't worry. Modprobing the same module twice doesn't have any affect. Neither do the echo's.)
</p>
<h2><span class="mw-headline" id="Adjusting_your_daemons_so_they_run_at_a_lower_priority">Adjusting your daemons so they run at a lower priority</span></h2>
<p>I changed the startup scripts of transmission and nzbget to make sure they get a low priority.
</p><p>In /etc/init.d/nzbgetd:
</p>
<pre>nice -n 19 ionice -c3 /opt/bin/nzbget -c /usr/etc/nzbget.conf -D &amp;
</pre>
<p>/etc/init.d/transmission-daemon:
</p>
<pre>nice -n 15 ionice -c3 su - $DAEMON_USER -c "$DAEMON $DAEMON_ARGS"
</pre>
<p>Applying this works perfectly. The Stora can be downloading/par checking/unrarring and you wont notice. Even when you stream 1080p movies. Unfortunately the web gui of nzbget and transmission will be slow because we have to ionice the entire nzbget/transmission daemon and can't(a.f.a.i.k.) ionice the download threads.
</p><p>Good luck!
</p><p>--<a href="https://sigri44.github.io/OpenStora/wiki/index_User:Preaper&amp;action=edit&amp;redlink=1" class="new" title="User:Preaper (page does not exist)">Preaper</a> 10:58, 8 February 2011 (UTC)
</p>
<!-- 
NewPP limit report
CPU time usage: 0.018 seconds
Real time usage: 0.020 seconds
Preprocessor visited node count: 15/1000000
Preprocessor generated node count: 20/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key hardwar6_wiki:pcache:idhash:100-0!*!0!!en!*!* and timestamp 20171202193020
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href=/wiki/index_Make_your_Stora_responsive_even_while_its_downloading&amp;oldid=1124">/wiki/index_Make_your_Stora_responsive_even_while_its_downloading&amp;oldid=1124</a>"				</div>
												<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-login"><a href="https://sigri44.github.io/OpenStora/wiki/index_Special:UserLogin&amp;returnto=Make+your+Stora+responsive+even+while+its+downloading" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_Make_your_Stora_responsive_even_while_its_downloading"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_Talk:Make_your_Stora_responsive_even_while_its_downloading&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_Make_your_Stora_responsive_even_while_its_downloading" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_Make_your_Stora_responsive_even_while_its_downloading&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_Make_your_Stora_responsive_even_while_its_downloading&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="https://sigri44.github.io/OpenStora/wiki/index.php" id="searchform">
				<div id="simpleSearch">
						<input name="search" placeholder="Search" title="Search OpenStora [f]" accesskey="f" id="searchInput" />						<button type="submit" name="button" title="Search the pages for this text" id="searchButton"><img src="https://sigri44.github.io/OpenStora/wiki/skins/vector/images/search-ltr.png?303" alt="Search" width="12" height="13" /></button>								<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(/wiki/images/logo.png);" href="https://sigri44.github.io/OpenStora/wiki/index_Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-Website' aria-labelledby='p-Website-label'>
	<h3 id='p-Website-label'>Website</h3>
	<div class="body">
		<ul>
			<li id="n-OpenStora-Home"><a href="https://sigri44.github.io/OpenStora/" rel="nofollow">OpenStora Home</a></li>
			<li id="n-OpenStora-Forum"><a href="https://sigri44.github.io/OpenStora/phpBB3" rel="nofollow">OpenStora Forum</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-Wiki' aria-labelledby='p-Wiki-label'>
	<h3 id='p-Wiki-label'>Wiki</h3>
	<div class="body">
		<ul>
			<li id="n-Main-Page"><a href="https://sigri44.github.io/OpenStora/wiki/index_Main_Page">Main Page</a></li>
			<li id="n-Recent-changes"><a href=/wiki/index_Special:Recentchanges" rel="nofollow">Recent changes</a></li>
			<li id="n-Help"><a href="https://sigri44.github.io/OpenStora/wiki/index_Help">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="https://sigri44.github.io/OpenStora/wiki/index_Special:WhatLinksHere/Make_your_Stora_responsive_even_while_its_downloading" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="https://sigri44.github.io/OpenStora/wiki/index_Special:RecentChangesLinked/Make_your_Stora_responsive_even_while_its_downloading" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="https://sigri44.github.io/OpenStora/wiki/index_Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="https://sigri44.github.io/OpenStora/wiki/index_Make_your_Stora_responsive_even_while_its_downloading&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="https://sigri44.github.io/OpenStora/wiki/index_Make_your_Stora_responsive_even_while_its_downloading&amp;oldid=1124" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="https://sigri44.github.io/OpenStora/wiki/index_Make_your_Stora_responsive_even_while_its_downloading&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 2 September 2015, at 06:08.</li>
											<li id="footer-info-viewcount">This page has been accessed 20,976 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://sigri44.github.io/OpenStora/wiki/index_OpenStora:Privacy_policy" title="OpenStora:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://sigri44.github.io/OpenStora/wiki/index_OpenStora:About" title="OpenStora:About">About OpenStora</a></li>
											<li id="footer-places-disclaimer"><a href="https://sigri44.github.io/OpenStora/wiki/index_OpenStora:General_disclaimer" title="OpenStora:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="//www.mediawiki.org/"><img src="https://sigri44.github.io/OpenStora/wiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.170 secs. -->
	</body>
</html>
