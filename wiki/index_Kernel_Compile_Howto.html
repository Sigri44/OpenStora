<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.15.4" />
		<meta name="keywords" content="Kernel Compile Howto" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/wiki/opensearch_desc.php" title="OpenStora (en)" />
		<link rel="alternate" type="application/rss+xml" title="OpenStora RSS feed" href="/wiki/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="OpenStora Atom feed" href="/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Kernel Compile Howto - OpenStora</title>
		<link rel="stylesheet" href="/wiki/skins/common/shared.css?207" type="text/css" media="screen" />
		<link rel="stylesheet" href="/wiki/skins/common/commonPrint.css?207" type="text/css" media="print" />
		<link rel="stylesheet" href="/wiki/skins/monobook/main.css?207" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/wiki/skins/monobook/IE50Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/wiki/skins/monobook/IE55Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/monobook/IE60Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/monobook/IE70Fixes.css?207" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/wiki/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="/wiki/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" media="print" />
		<link rel="stylesheet" href="/wiki/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="/wiki/index.php?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/wiki/skins/common/IEFixes.js?207"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/wiki/skins";
		var wgArticlePath = "/wiki/index.php?title=$1";
		var wgScriptPath = "/wiki";
		var wgScript = "/wiki/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://www.openstora.com";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Kernel_Compile_Howto";
		var wgTitle = "Kernel Compile Howto";
		var wgAction = "view";
		var wgArticleId = "25";
		var wgIsArticle = true;
		var wgUserName = null;
		var wgUserGroups = null;
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = 82;
		var wgVersion = "1.15.4";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		/*]]>*/</script>

		<script type="text/javascript" src="/wiki/skins/common/wikibits.js?207"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/wiki/skins/common/ajax.js?207"></script>
		<script type="text/javascript" src="/wiki/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Kernel_Compile_Howto skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">Kernel Compile Howto</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From OpenStora</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p>You need to have the codesourcery toolchain to do this. (PLEASE SOMEONE EXPLAIN HOWOTO INSTALL THE TOOLCHAIN)
</p><p>!!!!!!!!!! Do not bubt this without confirmed JTAG access&nbsp;!!!!!!!!!!
</p>
<a name="Compiling_Uboot" id="Compiling_Uboot"></a><h2> <span class="mw-headline"> Compiling Uboot </span></h2>
<pre>$ git clone git://gitorious.org/openstora/u-boot-marvell-ms2110.git
$ cd u-boot-marvell-ms2110
$ make mrproper
$ make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- netgear_ms2110_config
$ make -j8 ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-  u-boot.kwb
</pre>
<p><br />
</p>
<a name="Compiling_Kernel" id="Compiling_Kernel"></a><h2> <span class="mw-headline"> Compiling Kernel </span></h2>
<p>First make sure you have the mkimage utility, from the u-boot you compiled above, somewhere in your path along with the codesourcery toolchain.
</p>
<pre>$ git clone git://gitorious.org/openstora/orion-netgear_ms2110.git
$ cd orion-netgear_ms2110
$ make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- kirkwood_defconfig
$ make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- menuconfig
</pre>
<p>Pick out the drivers you want compiled into your kernel.  You'll certainly want to make sure that the only RTC driver you have is Philips PCF8563/Epson RTC8564. You should disable the hwmon drivers except for LM75.  You'll also want to enable RAID, XFS, and stuff like that.  Customize the kernel however you like.  Then:
</p>
<pre>$ make -j8 ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- uImage
$ cp arch/arm/boot/uImage /tftpboot/
$ make -j8 ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- modules
$ make -j8 ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- modules_install INSTALL_MOD_PATH=/mnt/Axentra/marvell.nfs.rootfs
</pre>
<p>That's pretty much it!   It doesn't have kernel fan support or rtc alarms, but that stuff can come later.  It's not as clean as it can be, but it's definitely something you can play around with.
</p><p>I added a file, stora.config which is a working .config to get you started in case menuconfig is a little too overwhelming.
</p><p>Following my own instructions from scratch:
</p>
<pre>-bash-3.2# uname -a
Linux fedora-arm 2.6.34-rc2-g03210d8 #1 PREEMPT Wed Mar 24 00:35:03 PDT 2010 armv5tel armv5tel armv5tel GNU/Linux
-bash-3.2# 
</pre>
<p>ORIGINAL POST:
<a href="http://www.hardwarehackersunite.com/index.php?option=com_ccboard&amp;view=postlist&amp;forum=1&amp;topic=62&amp;Itemid=53" class="external free" title="http://www.hardwarehackersunite.com/index.php?option=com_ccboard&amp;view=postlist&amp;forum=1&amp;topic=62&amp;Itemid=53" rel="nofollow">http://www.hardwarehackersunite.com/index.php?option=com_ccboard&amp;view=postlist&amp;forum=1&amp;topic=62&amp;Itemid=53</a>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 3/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key hardwar6_wiki:pcache:idhash:25-0!1!0!!en!2!edit=0 and timestamp 20111130043333 -->
<div class="printfooter">
Retrieved from "<a href=/wiki/index_Kernel_Compile_Howto">/wiki/index_Kernel_Compile_Howto</a>"</div>
						<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/index_Kernel_Compile_Howto" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="/wiki/index_Talk:Kernel_Compile_Howto&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-viewsource"><a href="/wiki/index_Kernel_Compile_Howto&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				 <li id="ca-history"><a href="/wiki/index_Kernel_Compile_Howto&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/wiki/index_Special:UserLogin&amp;returnto=Kernel_Compile_Howto" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/wiki/images/logo.png);" href="http://www.openstora.com/"  title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-Website'>
		<h5>Website</h5>
		<div class='pBody'>
			<ul>
				<li id="n-HHU-Home"><a href="http://www.hardwarehackersunite.com">HHU Home</a></li>
				<li id="n-HHU-Forum"><a href="http://www.hardwarehackersunite.com/phpBB3">HHU Forum</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-Wiki'>
		<h5>Wiki</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Main-Page"><a href="/wiki/index_Main_Page">Main Page</a></li>
				<li id="n-Recent-changes"><a href=/wiki/index_Special:Recentchanges">Recent changes</a></li>
				<li id="n-Help"><a href="/wiki/index_Help">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/index.php" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search OpenStora [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/index_Special:WhatLinksHere/Kernel_Compile_Howto" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/index_Special:RecentChangesLinked/Kernel_Compile_Howto" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="/wiki/index_Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/wiki/index_Kernel_Compile_Howto&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/wiki/index_Kernel_Compile_Howto&amp;oldid=82" title="Permanent link to this revision of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/wiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 25 April 2010, at 11:30.</li>
					<li id="viewcount">This page has been accessed 2,080 times.</li>
					<li id="privacy"><a href="/wiki/index_OpenStora:Privacy_policy" title="OpenStora:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/wiki/index_OpenStora:About" title="OpenStora:About">About OpenStora</a></li>
					<li id="disclaimer"><a href="/wiki/index_OpenStora:General_disclaimer" title="OpenStora:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-11919885-3");
pageTracker._trackPageview();
</script><!-- Served in 0.372 secs. --></body></html>
