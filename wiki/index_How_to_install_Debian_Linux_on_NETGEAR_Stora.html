<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>How to install Debian Linux on NETGEAR Stora - OpenStora</title>
<meta name="generator" content="MediaWiki 1.22.6" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://sigri44.github.io/OpenStora/wiki/opensearch_desc.php" title="OpenStora (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://sigri44.github.io/OpenStora/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="OpenStora Atom feed" href="https://sigri44.github.io/OpenStora/wiki/index_Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="style.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: hardwar6_wiki:resourceloader:filter:minify-css:7:a5305c32ce5719fffdb0ebb117d3d93a */</style>

<script src="https://sigri44.github.io/OpenStora/wiki/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"How_to_install_Debian_Linux_on_NETGEAR_Stora","wgTitle":"How to install Debian Linux on NETGEAR Stora","wgCurRevisionId":1035,"wgRevisionId":1035,"wgArticleId":123,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"How_to_install_Debian_Linux_on_NETGEAR_Stora","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: hardwar6_wiki:resourceloader:filter:minify-js:7:5a69c7e0fa6557851b6dea8a62efaffb */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("https://sigri44.github.io/OpenStora/wiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-How_to_install_Debian_Linux_on_NETGEAR_Stora skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">How to install Debian Linux on NETGEAR Stora</span></h1>
			<div id="bodyContent">
								<div id="siteSub">From OpenStora</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This is a guide to install Debian Linux on:
</p>
<ul>
<li> NETGEAR Stora MS2000
</li>
<li> NETGEAR Stora MS2110
</li>
<li> NETGEAR Stora MS2120 
</li>
</ul>
<p>The goals are:
</p>
<ul>
<li> Run a full stable Debian linux on NETGEAR Stora
</li>
<li> The system will be running from a USB stick, so system- and data-drives are not mixed.
</li>
<li> The system will be running a stable Debian kernel, for which you can compile modules to, yourself.
</li>
</ul>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Preparations"><span class="tocnumber">1</span> <span class="toctext">Preparations</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Things_you_need"><span class="tocnumber">1.1</span> <span class="toctext">Things you need</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Setup_TTL_serial_connection"><span class="tocnumber">1.2</span> <span class="toctext">Setup TTL serial connection</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Setup_a_TFTP_server"><span class="tocnumber">1.3</span> <span class="toctext">Setup a TFTP server</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Install_Debian"><span class="tocnumber">2</span> <span class="toctext">Install Debian</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Prepare_the_Stora"><span class="tocnumber">2.1</span> <span class="toctext">Prepare the Stora</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Interrupt_U-Boot"><span class="tocnumber">2.2</span> <span class="toctext">Interrupt U-Boot</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Setup_environments_for_flashing"><span class="tocnumber">2.3</span> <span class="toctext">Setup environments for flashing</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Load_and_start_the_installation"><span class="tocnumber">2.4</span> <span class="toctext">Load and start the installation</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Running_the_installer"><span class="tocnumber">2.5</span> <span class="toctext">Running the installer</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Boot_the_system"><span class="tocnumber">2.6</span> <span class="toctext">Boot the system</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Install_the_kernel"><span class="tocnumber">2.7</span> <span class="toctext">Install the kernel</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Configure_the_kernel_for_booting"><span class="tocnumber">2.8</span> <span class="toctext">Configure the kernel for booting</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Reading_the_UUID_of_your_root_partition"><span class="tocnumber">2.9</span> <span class="toctext">Reading the UUID of your root partition</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Test_boot_the_new_kernel"><span class="tocnumber">2.10</span> <span class="toctext">Test boot the new kernel</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Setup_permanent_boot"><span class="tocnumber">2.11</span> <span class="toctext">Setup permanent boot</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#Installing_Kernel_to_NAND"><span class="tocnumber">3</span> <span class="toctext">Installing Kernel to NAND</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Copy_the_kernel_to_TFTP"><span class="tocnumber">3.1</span> <span class="toctext">Copy the kernel to TFTP</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#See_bad_blocks"><span class="tocnumber">3.2</span> <span class="toctext">See bad blocks</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Copy_uImage_from_TFTP_server_to_RAM"><span class="tocnumber">3.3</span> <span class="toctext">Copy uImage from TFTP server to RAM</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Erase_NAND_.28DANGEROUS.29"><span class="tocnumber">3.4</span> <span class="toctext">Erase NAND (DANGEROUS)</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Copy_uImage_from_RAM_to_NAND_.28DANGEROUS.29"><span class="tocnumber">3.5</span> <span class="toctext">Copy uImage from RAM to NAND (DANGEROUS)</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Copy_uInitrd_from_TFTP_server_to_RAM"><span class="tocnumber">3.6</span> <span class="toctext">Copy uInitrd from TFTP server to RAM</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Erase_NAND_.28DANGEROUS.29_2"><span class="tocnumber">3.7</span> <span class="toctext">Erase NAND (DANGEROUS)</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Copy_uImage_from_RAM_to_NAND_.28DANGEROUS.29_2"><span class="tocnumber">3.8</span> <span class="toctext">Copy uImage from RAM to NAND (DANGEROUS)</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Setup_booting"><span class="tocnumber">3.9</span> <span class="toctext">Setup booting</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Reset"><span class="tocnumber">3.10</span> <span class="toctext">Reset</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Preparations">Preparations</span></h2>
<h3><span class="mw-headline" id="Things_you_need">Things you need</span></h3>
<ul>
<li> Netgear Stora&#160;:-)
</li>
<li> A <a href="https://sigri44.github.io/OpenStora/wiki/index_Root_Access_Via_Serial_Console" title="Root Access Via Serial Console"> TTL serial port</a>, and wires to connect it.
</li>
<li> An USB stick. Preferably with +10MB/s write speed, and +8GB capacity.
</li>
<li> A PC to serve as a TFTP server, and to connect to the Stora via the TTL serial port.
</li>
</ul>
<p>All the files in this guide can also be downloaded from <a rel="nofollow" class="external free" href="http://openstora.cablecat.dk">http://openstora.cablecat.dk</a>.
</p>
<h3><span class="mw-headline" id="Setup_TTL_serial_connection">Setup TTL serial connection</span></h3>
<p>Make a TTL serial connection as described here: <a href="https://sigri44.github.io/OpenStora/wiki/index_Root_Access_Via_Serial_Console" title="Root Access Via Serial Console">Root Access Via Serial Console</a>
</p><p>Install screen and connect to the USB attached serial connection:
</p>
<pre>#This is done on your PC
aptitude -y install screen
screen /dev/ttyUSB0 115200
</pre>
<p>If you need, you can use the keyboard combo "ctrl+a d" to detach from screen, and the command "screen -r" to reattach. See "man screen" for details.
</p><p><b>Note:</b> Windows users can use <a rel="nofollow" class="external text" href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PuTTY</a>.
</p>
<h3><span class="mw-headline" id="Setup_a_TFTP_server">Setup a TFTP server</span></h3>
<p>Install tfpd and download the files to the TFTP dir:
</p>
<pre>#This is done on your PC
aptitude -y install tftpd-hpa
service tftpd-hpa start
cd /var/lib/tftpboot/ # or cd /srv/tftp
wget <a rel="nofollow" class="external free" href="http://dl.dropbox.com/u/1397036/stora_di/uImage.di">http://dl.dropbox.com/u/1397036/stora_di/uImage.di</a>
wget <a rel="nofollow" class="external free" href="http://dl.dropbox.com/u/1397036/stora_di/uInitrd.di">http://dl.dropbox.com/u/1397036/stora_di/uInitrd.di</a>
wget <a rel="nofollow" class="external free" href="http://dl.dropbox.com/u/1397036/stora_di/uImage">http://dl.dropbox.com/u/1397036/stora_di/uImage</a>
wget <a rel="nofollow" class="external free" href="http://dl.dropbox.com/u/1397036/stora_di/uInitrd">http://dl.dropbox.com/u/1397036/stora_di/uInitrd</a>
</pre>
<p><b>Note:</b> Windows users can use <a rel="nofollow" class="external text" href="http://kin.klever.net/pumpkin/binaries">PumpKIN</a>.
</p>
<h2><span class="mw-headline" id="Install_Debian">Install Debian</span></h2>
<h3><span class="mw-headline" id="Prepare_the_Stora">Prepare the Stora</span></h3>
<ol>
<li> Detach the hard-drive(s). You so don't accidentally install anything on them. And so your USB stick always becomes /dev/sda.
</li>
<li> Attach your USB stick.
</li>
</ol>
<h3><span class="mw-headline" id="Interrupt_U-Boot">Interrupt U-Boot</span></h3>
<p>When the Stora starts, you will have a short time where you can interrupt the boot process.
</p>
<pre>Hit any key to stop autoboot:
</pre>
<p>Type "help" for more information about what you can do.
</p><p>With the command "printenv", you can see the settings of U-Boot.
</p><p>See also: <a href="https://sigri44.github.io/OpenStora/wiki/index_Default_environment_of_U-Boot" title="Default environment of U-Boot">Default environment of U-Boot</a>.
</p>
<h3><span class="mw-headline" id="Setup_environments_for_flashing">Setup environments for flashing</span></h3>
<pre>setenv mainlineLinux yes
setenv arcNumber 2743
setenv ipaddr XXX.XXX.XXX.XXX   #This is the IP of your Stora
setenv serverip XXX.XXX.XXX.XXX #This is the IP of your TFTP server
saveenv
reset
</pre>
<h3><span class="mw-headline" id="Load_and_start_the_installation">Load and start the installation</span></h3>
<pre>#Interrupt the U-Boot process.
tftpboot 0x200000 uImage.di
tftpboot 0x800000 uInitrd.di
setenv bootargs console=ttyS0,115200n8 base-installer/initramfs-tools/driver-policy=most
bootm 0x200000 0x800000
</pre>
<h3><span class="mw-headline" id="Running_the_installer">Running the installer</span></h3>
<p>Install Debian as normal.
</p><p>You can ignore errors about:
</p>
<ul>
<li> No kernel modules were found.
</li>
<li> Software RAID not available
</li>
<li> Logical Volume Manager not available
</li>
<li> No installable kernel was found
</li>
</ul>
<h3><span class="mw-headline" id="Boot_the_system">Boot the system</span></h3>
<pre>#Interrupt the U-Boot process.
tftpboot 0x200000 uImage
tftpboot 0x800000 uInitrd
setenv bootargs $(console) root=/dev/sda1
bootm 0x200000 0x800000
</pre>
<p>You might have to replace root=/dev/sda1 with root=/dev/sda2 or root=/dev/sda5. In case you installed "/" on another partition. Remember, do not attach any hard-drives yet.
</p>
<h3><span class="mw-headline" id="Install_the_kernel">Install the kernel</span></h3>
<pre>#Login to your new Debian
aptitude update
aptitude -y install uboot-mkimage initramfs-tools ntpdate
ntpdate-debian
wget <a rel="nofollow" class="external free" href="http://dl.dropbox.com/u/1397036/stora_di/linux-headers-2.6.32-6-kirkwood_2.6.32-6-kirkwood-10.00.Custom_armel.deb">http://dl.dropbox.com/u/1397036/stora_di/linux-headers-2.6.32-6-kirkwood_2.6.32-6-kirkwood-10.00.Custom_armel.deb</a>
wget <a rel="nofollow" class="external free" href="http://dl.dropbox.com/u/1397036/stora_di/linux-image-2.6.32-6-kirkwood_2.6.32-6-kirkwood-10.00.Custom_armel.deb">http://dl.dropbox.com/u/1397036/stora_di/linux-image-2.6.32-6-kirkwood_2.6.32-6-kirkwood-10.00.Custom_armel.deb</a>
wget <a rel="nofollow" class="external free" href="http://dl.dropbox.com/u/1397036/stora_di/2.6.32.mach.tgz">http://dl.dropbox.com/u/1397036/stora_di/2.6.32.mach.tgz</a>
dpkg -i linux-*-2.6.32-6-kirkwood_*.deb
ln -s /usr/src/linux-headers-2.6.32-6-kirkwood/ /lib/modules/2.6.32-6-kirkwood/build
tar xzf 2.6.32.mach.tgz -C /usr/src/linux-headers-2.6.32-6-kirkwood/arch/arm/
</pre>
<p><b>Note:</b> The modification done to this kernel can be found here: <a rel="nofollow" class="external free" href="https://github.com/kenchy/debian_squeeze_stora_kernel">https://github.com/kenchy/debian_squeeze_stora_kernel</a>
</p>
<h3><span class="mw-headline" id="Configure_the_kernel_for_booting">Configure the kernel for booting</span></h3>
<pre>wget <a rel="nofollow" class="external free" href="http://dl.dropbox.com/u/1397036/stora_di/stora-flash">http://dl.dropbox.com/u/1397036/stora_di/stora-flash</a>
chmod +x stora-flash
/root/stora-flash -i /boot/vmlinuz-2.6.32-6-kirkwood -r /boot/initrd.img-2.6.32-6-kirkwood
</pre>
<h3><span class="mw-headline" id="Reading_the_UUID_of_your_root_partition">Reading the UUID of your root partition</span></h3>
<p>Right now your root partition is most likely /dev/sda1. If you attach one hard-drive and reboot. Then the root partition will become /dev/sdb1, and booting will fail. Therefor you need to use the UUID of the root partition instead.
</p><p>This will tell the UUID of your root partition:
</p>
<pre>grep " / " /etc/fstab
</pre>
<p>Copy it. It will be used in the next steps.
</p>
<h3><span class="mw-headline" id="Test_boot_the_new_kernel">Test boot the new kernel</span></h3>
<pre>#Reboot the system and interrupt the U-Boot process.
setenv bootargs $(console) root=UUID=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX rootdelay=8
usb reset
ext2load usb 0 0x200000 /boot/uImage
ext2load usb 0 0x800000 /boot/uInitrd
bootm 0x200000 0x800000
</pre>
<p>See <a href="#Installing_Kernel_to_NAND">#Installing Kernel to NAND</a>, if this does not work.
</p>
<h3><span class="mw-headline" id="Setup_permanent_boot">Setup permanent boot</span></h3>
<p>Assuming that the last step worked without problems, you can now setup the stora to always boot from the USB stick.
</p>
<pre>#Reboot the system and interrupt the U-Boot process.
setenv bootcmd_usb 'usb reset; ext2load usb 0 0x200000 /boot/uImage; ext2load usb 0 0x800000 /boot/uInitrd'
setenv bootcmd 'setenv bootargs $(console) root=UUID=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX rootdelay=8; run bootcmd_usb; bootm 0x200000 0x800000'
saveenv
reset
</pre>
<h2><span class="mw-headline" id="Installing_Kernel_to_NAND">Installing Kernel to NAND</span></h2>
<div style="border: 2px solid black;background-color: yellow;font-weight:bold;padding: 3px;">
<p>This step is only necessary if you cannot load/boot the kernel from your USB stick. For example some USB-sticks makes "usb reset" halt. If you can boot your system now, you are done.
</p><p>Take care when using the command "nand" in U-Boot. This command will brick your Stora, if you use an offset less that 0x100000. See "help nand".
</p><p>If you follow this guide, you will destroy the original file system on the Stora. Which you will no longer need, since your filesystem is on the USB stick.
</p>
</div>
<p>Since this is dangerous to do. The output of the commands are included in this part of the guide.
</p><p>The purpose is to copy the kernel to these places on the Stora flash:
</p>
<pre># uImage  - start:0x700000 size:0x300000 - Starts at  7MB, ends at 10MB, max 3MB large
# uInitrd - start:0xA00000 size:0x6F0000 - Starts at 10MB, ends at 17MB, max 7MB large

# The max size of uInitrd is set to 0x6F0000, rather than 0x700000,
# so you don't confuse the max size of uInitrd, and the start of uImage.
</pre>
<h3><span class="mw-headline" id="Copy_the_kernel_to_TFTP">Copy the kernel to TFTP</span></h3>
<p>copy the file <a rel="nofollow" class="external text" href="http://openstora.cablecat.dk/uImage-2.6.32-6">/boot/uImage</a> and <a rel="nofollow" class="external text" href="http://openstora.cablecat.dk/uInitrd-2.6.32-6">/boot/uInitrd</a> from your Stora to your TFTP server.
</p>
<h3><span class="mw-headline" id="See_bad_blocks">See bad blocks</span></h3>
<pre>
Marvell&gt;&gt; nand bad

Device 0 bad blocks:
  00a40000 # &lt;- This block is inside where we are going to store the kernel.
  052a0000
  0bfe0000
  0c020000
  0d240000
  0d3c0000
  0ef00000
</pre>
<p>On this example Stora there are quite a few bad block. On yours there are probably less.
</p><p>As you see, there is a bad block inside where we are going to store the kernel. This is not a problem, because the Stora will skip this block when using the commands read.e and write.e.
</p>
<h3><span class="mw-headline" id="Copy_uImage_from_TFTP_server_to_RAM">Copy uImage from TFTP server to RAM</span></h3>
<pre>
Marvell&gt;&gt; tftpboot 0x200000 uImage-2.6.32-6
Using egiga0 device
TFTP from server 10.51.11.11; our IP address is 10.51.11.123
Filename 'uImage-2.6.32-6'.
Load address: 0x200000
Loading: #################################################################
         #################################################################
         #################################################################
         #################################################################
         ######################
done
Bytes transferred = 1438920 (15f4c8 hex)
</pre>
<h3><span class="mw-headline" id="Erase_NAND_.28DANGEROUS.29">Erase NAND (DANGEROUS)</span></h3>
<pre>
Marvell&gt;&gt; nand erase 0x700000 0x300000

NAND erase: device 0 offset 0x700000, size 0x300000
Erasing at 0x9e0000 -- 100% complete.
OK
</pre>
<h3><span class="mw-headline" id="Copy_uImage_from_RAM_to_NAND_.28DANGEROUS.29">Copy uImage from RAM to NAND (DANGEROUS)</span></h3>
<pre>
Marvell&gt;&gt; nand write.e 0x200000 0x700000 0x300000

NAND write: device 0 offset 0x700000, size 0x300000

Writing data at 0x9ff800 -- 100% complete.
 3145728 bytes written: OK
</pre>
<h3><span class="mw-headline" id="Copy_uInitrd_from_TFTP_server_to_RAM">Copy uInitrd from TFTP server to RAM</span></h3>
<pre>
Marvell&gt;&gt; tftpboot 0x800000 uInitrd-2.6.32-6
Using egiga0 device
TFTP from server 10.51.11.11; our IP address is 10.51.11.123
Filename 'uInitrd-2.6.32-6'.
Load address: 0x800000
Loading: #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #########################
done
Bytes transferred = 5116874 (4e13ca hex)
</pre>
<h3><span class="mw-headline" id="Erase_NAND_.28DANGEROUS.29_2">Erase NAND (DANGEROUS)</span></h3>
<pre>
Marvell&gt;&gt; nand erase 0xA00000 0x6F0000

NAND erase: device 0 offset 0xa00000, size 0x6f0000
Skipping bad block at  0x00a40000
Erasing at 0x10e0000 -- 100% complete.
OK
</pre>
<h3><span class="mw-headline" id="Copy_uImage_from_RAM_to_NAND_.28DANGEROUS.29_2">Copy uImage from RAM to NAND (DANGEROUS)</span></h3>
<pre>
Marvell&gt;&gt; nand write.e 0x800000 0xA00000 0x6F0000

NAND write: device 0 offset 0xa00000, size 0x6f0000

Bad block at 0xa40000 in erase block from 0xa40000 will be skipped
Writing data at 0x110f800 -- 100% complete.
 7274496 bytes written: OK
</pre>
<p>As you see, the bad block at 0xa40000 was automatically skipped.
</p>
<h3><span class="mw-headline" id="Setup_booting">Setup booting</span></h3>
<pre>
setenv bootcmd_usb 'nand read.e 0x200000 0x700000 0x300000; nand read.e 0x800000 0xA00000 0x6F0000'
setenv bootcmd 'setenv bootargs $(console) root=UUID=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX rootdelay=12; run bootcmd_usb; bootm 0x200000 0x800000'
saveenv
</pre>
<p>To reduce the boot time, you can experiment with lowing 0x300000, 0x6F0000, and rootdelay=12.
</p>
<h3><span class="mw-headline" id="Reset">Reset</span></h3>
<p>Power cycle your Stora to proper test this.
</p>
<!-- 
NewPP limit report
CPU time usage: 0.045 seconds
Real time usage: 0.052 seconds
Preprocessor visited node count: 182/1000000
Preprocessor generated node count: 278/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key hardwar6_wiki:pcache:idhash:123-0!*!0!!en!*!* and timestamp 20171216121009
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href=/wiki/index_How_to_install_Debian_Linux_on_NETGEAR_Stora&amp;oldid=1035">/wiki/index_How_to_install_Debian_Linux_on_NETGEAR_Stora&amp;oldid=1035</a>"				</div>
												<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-login"><a href="https://sigri44.github.io/OpenStora/wiki/index_Special:UserLogin&amp;returnto=How+to+install+Debian+Linux+on+NETGEAR+Stora" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_How_to_install_Debian_Linux_on_NETGEAR_Stora"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_Talk:How_to_install_Debian_Linux_on_NETGEAR_Stora&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_How_to_install_Debian_Linux_on_NETGEAR_Stora" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_How_to_install_Debian_Linux_on_NETGEAR_Stora&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="https://sigri44.github.io/OpenStora/wiki/index_How_to_install_Debian_Linux_on_NETGEAR_Stora&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="https://sigri44.github.io/OpenStora/wiki/index.php" id="searchform">
				<div id="simpleSearch">
						<input name="search" placeholder="Search" title="Search OpenStora [f]" accesskey="f" id="searchInput" />						<button type="submit" name="button" title="Search the pages for this text" id="searchButton"><img src="https://sigri44.github.io/OpenStora/wiki/skins/vector/images/search-ltr.png?303" alt="Search" width="12" height="13" /></button>								<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(/wiki/images/logo.png);" href="https://sigri44.github.io/OpenStora/wiki/index_Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-Website' aria-labelledby='p-Website-label'>
	<h3 id='p-Website-label'>Website</h3>
	<div class="body">
		<ul>
			<li id="n-OpenStora-Home"><a href="https://sigri44.github.io/OpenStora/" rel="nofollow">OpenStora Home</a></li>
			<li id="n-OpenStora-Forum"><a href="https://sigri44.github.io/OpenStora/phpBB3" rel="nofollow">OpenStora Forum</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-Wiki' aria-labelledby='p-Wiki-label'>
	<h3 id='p-Wiki-label'>Wiki</h3>
	<div class="body">
		<ul>
			<li id="n-Main-Page"><a href="https://sigri44.github.io/OpenStora/wiki/index_Main_Page">Main Page</a></li>
			<li id="n-Recent-changes"><a href=/wiki/index_Special:Recentchanges" rel="nofollow">Recent changes</a></li>
			<li id="n-Help"><a href="https://sigri44.github.io/OpenStora/wiki/index_Help">Help</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="https://sigri44.github.io/OpenStora/wiki/index_Special:WhatLinksHere/How_to_install_Debian_Linux_on_NETGEAR_Stora" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="https://sigri44.github.io/OpenStora/wiki/index_Special:RecentChangesLinked/How_to_install_Debian_Linux_on_NETGEAR_Stora" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="https://sigri44.github.io/OpenStora/wiki/index_Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="https://sigri44.github.io/OpenStora/wiki/index_How_to_install_Debian_Linux_on_NETGEAR_Stora&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="https://sigri44.github.io/OpenStora/wiki/index_How_to_install_Debian_Linux_on_NETGEAR_Stora&amp;oldid=1035" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="https://sigri44.github.io/OpenStora/wiki/index_How_to_install_Debian_Linux_on_NETGEAR_Stora&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 6 December 2012, at 03:47.</li>
											<li id="footer-info-viewcount">This page has been accessed 44,335 times.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="https://sigri44.github.io/OpenStora/wiki/index_OpenStora:Privacy_policy" title="OpenStora:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="https://sigri44.github.io/OpenStora/wiki/index_OpenStora:About" title="OpenStora:About">About OpenStora</a></li>
											<li id="footer-places-disclaimer"><a href="https://sigri44.github.io/OpenStora/wiki/index_OpenStora:General_disclaimer" title="OpenStora:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="//www.mediawiki.org/"><img src="https://sigri44.github.io/OpenStora/wiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.175 secs. -->
	</body>
</html>
